<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="google-site-verification" content="GkJ68PCnxM9Ih7Zm9v8p91FOCV7ymNCO2KdGbflLh3E"><meta name="360-site-verification" content="dd6547587641bfede036f7c79561e8a0"><meta name="shenma-site-verification" content="fd96cf3751972c9b05f8471d2ccadddc_1496951214"><meta name="msvalidate.01" content="1D38B05050A977F6FDEDA481198343F1"><meta name="sogou_site_verification" content="MpPsku240L"><title>Elastic-Job-Cloud æºç åˆ†æ â€”â€” ä½œä¸šé…ç½® | èŠ‹é“æºç  â€”â€” çº¯æºç è§£æBLOG</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3,minimum-scale=1"><meta name="author" content="ç‹æ–‡æ–Œ"><meta name="description" content="æœ¬æ–‡åŸºäº Elastic-Job V2.1.5 ç‰ˆæœ¬åˆ†äº«

1. æ¦‚è¿°
2. äº‘ä½œä¸šApp
2.1 äº‘ä½œä¸šAppé…ç½®ç±»
2.2 æ“ä½œäº‘ä½œä¸šAppé…ç½®


3. äº‘ä½œä¸š
3.1 äº‘ä½œä¸šé…ç½®
3.1.1 æ“ä½œäº‘ä½œä¸šé…ç½®


3.2 æœ¬åœ°äº‘ä½œä¸šé…ç½®
3.3 äº‘ä½œä¸šé…ç½®æ€»ç»“


666. å½©è›‹




ğŸ™‚"><meta name="keywords" content="Java,æ¶æ„,åç«¯,æœåŠ¡ç«¯,RocketMQ,MyCAT,åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—,åˆ†å¸ƒå¼å­˜å‚¨,æŠ€æœ¯åšå®¢,Sharding-JDBC,åˆ†åº“åˆ†è¡¨"><link rel="alternate" href="atom.xml" title="èŠ‹é“æºç  â€”â€” çº¯æºç è§£æBLOG" type="application/atom+xml"><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?ef4ed89f6dc83d01803a2440ae21e666";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>!function(){var t="http:"==document.location.protocol?"http://js.passport.qihucdn.com/11.0.1.js?f05b61dd54bbc38386611a5238672938":"https://jspassport.ssl.qhimg.com/11.0.1.js?f05b61dd54bbc38386611a5238672938";document.write('<script src="'+t+'" id="sozz"><\/script>')}()</script><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></head></html><body><header><div><div id="textlogo"><h1 class="site-name"><a href="/" title="èŠ‹é“æºç  â€”â€” çº¯æºç è§£æBLOG">èŠ‹é“æºç  â€”â€” çº¯æºç è§£æBLOG</a></h1><a class="blog-motto">æ„¿åŠç”Ÿç¼–ç ï¼Œå¦‚ä¸€ç”Ÿè€å‹ï¼</a></div><div class="navbar"><a class="navbutton navmobile" href="#" title="èœå•"></a></div><nav class="animated"><ul><ul><li><a href="/">æ–‡ç« </a></li><li><a href="https://github.com/YunaiV" rel="external nofollow noopener noreferrer" target="_blank">Github</a></li><li><a href="http://www.yunai.me/images/common/wechat_mp_2017_07_31_bak.jpg">å¾®ä¿¡å…¬ä¼—å·</a></li><li><a href="/link_url">å‹é“¾</a></li></ul></ul></nav></div></header><div id="container"><div class="openaside"><a class="navbutton" href="#" title="æ˜¾ç¤ºä¾§è¾¹æ "></a></div><div id="toc" class="toc-aside"><strong class="toc-title">æ–‡ç« ç›®å½•</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-æ¦‚è¿°"><span class="toc-number">1.</span> <span class="toc-text">1. æ¦‚è¿°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-äº‘ä½œä¸šApp"><span class="toc-number">2.</span> <span class="toc-text">2. äº‘ä½œä¸šApp</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-äº‘ä½œä¸šAppé…ç½®ç±»"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 äº‘ä½œä¸šAppé…ç½®ç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-æ“ä½œäº‘ä½œä¸šAppé…ç½®"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 æ“ä½œäº‘ä½œä¸šAppé…ç½®</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-äº‘ä½œä¸š"><span class="toc-number">3.</span> <span class="toc-text">3. äº‘ä½œä¸š</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-äº‘ä½œä¸šé…ç½®"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 äº‘ä½œä¸šé…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-æ“ä½œäº‘ä½œä¸šé…ç½®"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1 æ“ä½œäº‘ä½œä¸šé…ç½®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-æœ¬åœ°äº‘ä½œä¸šé…ç½®"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 æœ¬åœ°äº‘ä½œä¸šé…ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-äº‘ä½œä¸šé…ç½®æ€»ç»“"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 äº‘ä½œä¸šé…ç½®æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#666-å½©è›‹"><span class="toc-number">4.</span> <span class="toc-text">666. å½©è›‹</span></a></li></ol></div><div id="asidepart"><aside class="clearfix"><div id="authorInfo"><div><img width="100%" src="/images/common/wechat_mp_2017_07_31_bak.jpg"></div><div class="social-list"></div></div><div class="categorieslist"><p class="asidetitle">å¾®ä¿¡å…¬ä¼—å·ç¦åˆ©ï¼šèŠ‹é“æºç </p><ul><li><a href="/images/common/wechat_mp_2017_07_31_bak.jpg">0. é˜…è¯»æºç è‘µèŠ±å®å…¸</a></li><li><a href="/images/common/wechat_mp_2017_07_31_bak.jpg">1. RocketMQ / MyCAT / Sharding-JDBC è¯¦ç»†ä¸­æ–‡æ³¨é‡Šæºç </a></li><li><a href="/images/common/wechat_mp_2017_07_31_bak.jpg">2. æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€éƒ½å°†å¾—åˆ°è®¤çœŸå›å¤</a></li><li><a href="/images/common/wechat_mp_2017_07_31_bak.jpg">3. æ–°çš„æºç è§£ææ–‡ç« å®æ—¶æ”¶åˆ°é€šçŸ¥ï¼Œæ¯å‘¨å…­åç‚¹æ›´æ–°</a></li><li><a href="/images/common/wechat_mp_2017_07_31_bak.jpg">4. è®¤çœŸçš„æºç äº¤æµå¾®ä¿¡ç¾¤</a></li></ul></div><div class="categorieslist"><p class="asidetitle">åˆ†ç±»</p><ul><li><a href="/categories/Docker/" title="Docker">Docker<sup>2</sup></a></li><li><a href="/categories/Elastic-Job-Cloud/" title="Elastic-Job-Cloud">Elastic-Job-Cloud<sup>3</sup></a></li><li><a href="/categories/Elastic-Job-Lite/" title="Elastic-Job-Lite">Elastic-Job-Lite<sup>16</sup></a></li><li><a href="/categories/MyCAT/" title="MyCAT">MyCAT<sup>9</sup></a></li><li><a href="/categories/Nginx/" title="Nginx">Nginx<sup>1</sup></a></li><li><a href="/categories/RocketMQ/" title="RocketMQ">RocketMQ<sup>14</sup></a></li><li><a href="/categories/Sharding-JDBC/" title="Sharding-JDBC">Sharding-JDBC<sup>18</sup></a></li><li><a href="/categories/æŠ€æœ¯æ‚æ–‡/" title="æŠ€æœ¯æ‚æ–‡">æŠ€æœ¯æ‚æ–‡<sup>3</sup></a></li></ul></div></aside></div><div id="main" class="post" itemscope="" itemprop="blogPost"><article itemprop="articleBody"><header class="article-info clearfix"><h1 itemprop="name"><a href="/Elastic-Job/cloud-job-config/" title="Elastic-Job-Cloud æºç åˆ†æ â€”â€” ä½œä¸šé…ç½®" itemprop="url">Elastic-Job-Cloud æºç åˆ†æ â€”â€” ä½œä¸šé…ç½®</a></h1><p class="article-author"></p><p class="article-time">æ€»é˜…è¯»é‡:<span id="busuanzi_value_page_pv"></span>æ¬¡</p></header><div class="article-content"><p><strong>æœ¬æ–‡åŸºäº Elastic-Job V2.1.5 ç‰ˆæœ¬åˆ†äº«</strong></p><ul><li><a href="#">1. æ¦‚è¿°</a></li><li><a href="#">2. äº‘ä½œä¸šApp</a><ul><li><a href="#">2.1 äº‘ä½œä¸šAppé…ç½®ç±»</a></li><li><a href="#">2.2 æ“ä½œäº‘ä½œä¸šAppé…ç½®</a></li></ul></li><li><a href="#3">3. äº‘ä½œä¸š</a><ul><li><a href="#">3.1 äº‘ä½œä¸šé…ç½®</a><ul><li><a href="#">3.1.1 æ“ä½œäº‘ä½œä¸šé…ç½®</a></li></ul></li><li><a href="#">3.2 æœ¬åœ°äº‘ä½œä¸šé…ç½®</a></li><li><a href="#">3.3 äº‘ä½œä¸šé…ç½®æ€»ç»“</a></li></ul></li><li><a href="#">666. å½©è›‹</a></li></ul><hr><p><img src="http://www.yunai.me/images/common/wechat_mp_2017_07_31.jpg" alt=""></p><blockquote><p>ğŸ™‚ğŸ™‚ğŸ™‚å…³æ³¨<strong>å¾®ä¿¡å…¬ä¼—å·ï¼šã€èŠ‹é“æºç ã€‘</strong>æœ‰ç¦åˆ©ï¼š</p><ol><li>RocketMQ / MyCAT / Sharding-JDBC <strong>æ‰€æœ‰</strong>æºç åˆ†ææ–‡ç« åˆ—è¡¨</li><li>RocketMQ / MyCAT / Sharding-JDBC <strong>ä¸­æ–‡æ³¨é‡Šæºç  GitHub åœ°å€</strong></li><li>æ‚¨å¯¹äºæºç çš„ç–‘é—®æ¯æ¡ç•™è¨€<strong>éƒ½</strong>å°†å¾—åˆ°<strong>è®¤çœŸ</strong>å›å¤ã€‚<strong>ç”šè‡³ä¸çŸ¥é“å¦‚ä½•è¯»æºç ä¹Ÿå¯ä»¥è¯·æ•™å™¢</strong>ã€‚</li><li><strong>æ–°çš„</strong>æºç è§£ææ–‡ç« <strong>å®æ—¶</strong>æ”¶åˆ°é€šçŸ¥ã€‚<strong>æ¯å‘¨æ›´æ–°ä¸€ç¯‡å·¦å³</strong>ã€‚</li><li><strong>è®¤çœŸçš„</strong>æºç äº¤æµå¾®ä¿¡ç¾¤ã€‚</li></ol></blockquote><hr><h1 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h1><p>æœ¬æ–‡ä¸»è¦åˆ†äº« <strong>Elastic-Job-Cloud ä½œä¸šé…ç½®</strong>ã€‚</p><p>å¦‚æœä½ é˜…è¯»è¿‡ä»¥ä¸‹æ–‡ç« ï¼Œæœ‰åŠ©äºå¯¹æœ¬æ–‡çš„ç†è§£ï¼š</p><ul><li><a href="http://elasticjob.io/docs/elastic-job-cloud/02-guide/cloud-restful-api/" rel="external nofollow noopener noreferrer" target="_blank">ã€Šå®˜æ–¹æ–‡æ¡£ â€”â€” RESTFUL APIã€‹</a></li><li><a href="http://www.yunai.me/Elastic-Job/job-config/?self">ã€ŠElastic-Job-Lite æºç åˆ†æ â€”â€” ä½œä¸šé…ç½®ã€‹</a></li><li><a href="https://segmentfault.com/a/1190000007723430" rel="external nofollow noopener noreferrer" target="_blank">ã€Šç”±æµ…å…¥æ·± | å¦‚ä½•ä¼˜é›…åœ°å†™ä¸€ä¸ªMesos Frameworkã€‹</a></li></ul><p>ğŸ˜ˆ å¦å¤–ï¼Œç¬”è€…å‡è®¾ä½ å·²ç»å¯¹ <strong><a href="http://www.yunai.me/categories/Elastic-Job/?self">ã€ŠElastic-Job-Lite æºç åˆ†æç³»åˆ—ã€‹</a></strong> æœ‰ä¸€å®šçš„äº†è§£ã€‚</p><p>æœ¬æ–‡æ¶‰åŠåˆ°ä¸»ä½“ç±»çš„ç±»å›¾å¦‚ä¸‹( <a href="http://www.yunai.me/images/Elastic-Job/2017_12_14/01.png">æ‰“å¼€å¤§å›¾</a> )ï¼š</p><p><img src="http://www.yunai.me/images/Elastic-Job/2017_12_14/01.png" alt=""></p><ul><li><strong>é»„è‰²</strong>çš„ç±»åœ¨ <code>elastic-job-common-core</code> é¡¹ç›®é‡Œï¼Œä¸º Elastic-Job-Liteã€Elastic-Job-Cloud <strong>å…¬ç”¨</strong>ä½œä¸šé…ç½®ç±»ã€‚</li><li><strong>ç´«è‰²</strong>çš„ç±»åœ¨ <code>elastic-job-cloud</code> é¡¹ç›®é‡Œï¼Œä¸º Elastic-Job-Cloud ä½œä¸šé…ç½®ç±»ã€‚</li><li><strong>çº¢è‰²</strong>çš„ç±»åœ¨ <code>elastic-job-lite</code> é¡¹ç›®é‡Œï¼Œä¸º Elastic-Job-Lite ä½œä¸šé…ç½®ç±»ã€‚</li></ul><blockquote><p>ä½ è¡Œå¥½äº‹ä¼šå› ä¸ºå¾—åˆ°èµèµè€Œæ„‰æ‚¦<br>åŒç†ï¼Œå¼€æºé¡¹ç›®è´¡çŒ®è€…ä¼šå› ä¸º Star è€Œæ›´åŠ æœ‰åŠ¨åŠ›<br>ä¸º Elastic-Job ç‚¹èµï¼<a href="https://github.com/dangdangdotcom/elastic-job/stargazers" rel="external nofollow noopener noreferrer" target="_blank">ä¼ é€é—¨</a></p></blockquote><h1 id="2-äº‘ä½œä¸šApp"><a href="#2-äº‘ä½œä¸šApp" class="headerlink" title="2. äº‘ä½œä¸šApp"></a>2. äº‘ä½œä¸šApp</h1><p>é¦–å…ˆï¼Œç†è§£ä¸‹ <strong>äº‘ä½œä¸šApp</strong> çš„å®šä¹‰ï¼š</p><blockquote><p>FROM <a href="http://dangdangdotcom.github.io/elastic-job/elastic-job-cloud/02-guide/cloud-concepts/" rel="external nofollow noopener noreferrer" target="_blank">http://dangdangdotcom.github.io/elastic-job/elastic-job-cloud/02-guide/cloud-concepts/</a></p><p>ä½œä¸šAPPæŒ‡ä½œä¸šæ‰“åŒ…éƒ¨ç½²åçš„åº”ç”¨ï¼Œæè¿°äº†ä½œä¸šå¯åŠ¨éœ€è¦ç”¨åˆ°çš„CPUã€å†…å­˜ã€å¯åŠ¨è„šæœ¬åŠåº”ç”¨ä¸‹è½½è·¯å¾„ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œæ¯ä¸ªAPPå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªä½œä¸šã€‚</p></blockquote><p>ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªäº‘ä½œä¸šAppå¯ä»¥ç†è§£æˆç”±å¤šä¸ªä½œä¸šæ‰“åœ¨ä¸€èµ·çš„ <code>jar</code>ã€‚</p><h2 id="2-1-äº‘ä½œä¸šAppé…ç½®ç±»"><a href="#2-1-äº‘ä½œä¸šAppé…ç½®ç±»" class="headerlink" title="2.1 äº‘ä½œä¸šAppé…ç½®ç±»"></a>2.1 äº‘ä½œä¸šAppé…ç½®ç±»</h2><p>CloudAppConfigurationï¼Œäº‘ä½œä¸šAppé…ç½®ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudAppConfiguration</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * åº”ç”¨å</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String appName;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * åº”ç”¨åŒ…åœ°å€</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String appURL;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * åº”ç”¨å¯åŠ¨è„šæœ¬</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String bootstrapScript;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * cpu æ•°é‡</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">double</span> cpuCount = <span class="number">1</span>;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å†…å­˜ å¤§å°</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">double</span> memoryMB = <span class="number">128</span>;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * æ¯æ¬¡æ‰§è¡Œä½œä¸šæ—¶æ˜¯å¦ä»ç¼“å­˜ä¸­è¯»å–åº”ç”¨ã€‚ç¦ç”¨åˆ™æ¯æ¬¡æ‰§è¡Œä»»åŠ¡å‡ä»åº”ç”¨ä»“åº“ä¸‹è½½åº”ç”¨è‡³æœ¬åœ°</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> appCacheEnable = <span class="keyword">true</span>;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å¸¸é©»ä½œä¸šäº‹ä»¶é‡‡æ ·ç‡ç»Ÿè®¡æ¡æ•°ï¼Œé»˜è®¤ä¸é‡‡æ ·å…¨éƒ¨è®°å½•ã€‚</div><div class="line">     * ä¸ºé¿å…æ•°æ®é‡è¿‡å¤§ï¼Œå¯å¯¹é¢‘ç¹è°ƒåº¦çš„å¸¸é©»ä½œä¸šé…ç½®é‡‡æ ·ç‡ï¼Œå³ä½œä¸šæ¯æ‰§è¡ŒNæ¬¡ï¼Œæ‰ä¼šè®°å½•ä½œä¸šæ‰§è¡ŒåŠè¿½è¸ªç›¸å…³æ•°æ®</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> eventTraceSamplingCount;</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>åœ¨ Elastic-Job-Lite é‡Œï¼Œæ‰“åŒ…ä½œä¸šï¼Œéƒ¨ç½²åˆ°æœåŠ¡å™¨é‡Œå¯åŠ¨ã€‚è€Œåœ¨ Elastic-Job-Cloud é‡Œï¼Œæ‰“åŒ…ä½œä¸šä¸Šä¼ è‡³å¯ä¸‹è½½çš„åœ°å€ã€‚ä½œä¸šè¢«è°ƒåº¦æ—¶ï¼ŒMesos ä¼šä» <code>appURL</code> ä¸‹è½½åº”ç”¨åŒ…ï¼Œä½¿ç”¨ <code>bootstrapScript</code> å¯åŠ¨åº”ç”¨è¿›è¡Œæ‰§è¡Œã€‚å®é™…æƒ…å†µä¼šæ›´åŠ å¤æ‚ä¸€ä¸¢ä¸¢ï¼Œåœ¨<a href="http://www.yunai.me/Elastic-Job/cloud-job-scheduler-and-executor/?self">ã€ŠElastic-Job-Cloud æºç è§£æ â€”â€” ä½œä¸šè°ƒåº¦ï¼ˆä¸€ï¼‰ã€‹</a>è¯¦ç»†è§£æã€‚</li><li><code>cpuCount</code>, <code>memoryMB</code> é…ç½®<strong>äº‘ä½œä¸šAppè‡ªèº«å ç”¨çš„èµ„æºæƒ…å†µ</strong>ã€‚å…¶åŒ…å«çš„æ¯ä¸ªä½œä¸šå ç”¨çš„èµ„æºæƒ…å†µï¼Œä½¿ç”¨ä½œä¸šå¯¹åº”çš„äº‘ä½œä¸šé…ç½®( CloudJobConfiguration ) ï¼Œä¸‹æ–‡ä¹Ÿä¼šçœ‹åˆ°ã€‚</li><li><code>appCacheEnable</code>ï¼šæ¯æ¬¡æ‰§è¡Œä½œä¸šæ—¶æ˜¯å¦ä»ç¼“å­˜ä¸­è¯»å–åº”ç”¨ã€‚ç¦ç”¨åˆ™æ¯æ¬¡æ‰§è¡Œä»»åŠ¡å‡ä»åº”ç”¨ä»“åº“ä¸‹è½½åº”ç”¨è‡³æœ¬åœ°ã€‚</li><li><code>eventTraceSamplingCount</code>ï¼šå¸¸é©»ä½œä¸šäº‹ä»¶é‡‡æ ·ç‡ç»Ÿè®¡æ¡æ•°ï¼Œé»˜è®¤é‡‡æ ·å…¨éƒ¨è®°å½•ã€‚ä¸ºé¿å…æ•°æ®é‡è¿‡å¤§ï¼Œå¯å¯¹é¢‘ç¹è°ƒåº¦çš„å¸¸é©»ä½œä¸šé…ç½®é‡‡æ ·ç‡ï¼Œå³ä½œä¸šæ¯æ‰§è¡ŒNæ¬¡ï¼Œæ‰ä¼šè®°å½•ä½œä¸šæ‰§è¡ŒåŠè¿½è¸ªç›¸å…³æ•°æ®ã€‚</li></ul><h2 id="2-2-æ“ä½œäº‘ä½œä¸šAppé…ç½®"><a href="#2-2-æ“ä½œäº‘ä½œä¸šAppé…ç½®" class="headerlink" title="2.2 æ“ä½œäº‘ä½œä¸šAppé…ç½®"></a>2.2 æ“ä½œäº‘ä½œä¸šAppé…ç½®</h2><p>äº‘ä½œä¸šAppé…ç½®æœ‰å¤šç§æ“ä½œï¼š</p><ol><li>æ·»åŠ  / æ›´æ–° / åˆ é™¤</li><li>å¼€å¯ / ç¦ç”¨</li></ol><p>æœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œæ“ä½œï¼Œä»¥<strong>æ·»åŠ </strong>ä¸¾ä¾‹å­ï¼š</p><ul><li><p>è°ƒç”¨ HTTP æ¥å£ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><div class="line">curl -l -H "Content-type: application/json" -X POST -d '&#123;"appName":"foo_app","appURL":"http://app_host:8080/yourJobs.gz","cpuCount":0.1,"memoryMB":64.0,"bootstrapScript":"bin/start.sh","appCacheEnable":true,"eventTraceSamplingCount":0&#125;' http://elastic_job_cloud_host:8899/api/app</div></pre></td></tr></table></figure></li><li><p>è¿ç»´å¹³å°</p><p><img src="http://www.yunai.me/images/Elastic-Job/2017_12_14/02.png" alt=""></p></li></ul><p>è¿ç»´å¹³å°æ˜¯å¯¹è°ƒç”¨ HTTP æ¥å£çš„UIå°è£…ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// CloudAppRestfulApi</span></div><div class="line"><span class="meta">@Path</span>(<span class="string">"/app"</span>)</div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudAppRestfulApi</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * æ³¨å†Œåº”ç”¨é…ç½®.</div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> appConfig åº”ç”¨é…ç½®</div><div class="line">     */</div><div class="line">    <span class="meta">@POST</span></div><div class="line">    <span class="meta">@Consumes</span>(MediaType.APPLICATION_JSON)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(<span class="keyword">final</span> CloudAppConfiguration appConfig)</span> </span>&#123;</div><div class="line">        Optional&lt;CloudAppConfiguration&gt; appConfigFromZk = appConfigService.load(appConfig.getAppName());</div><div class="line">        <span class="keyword">if</span> (appConfigFromZk.isPresent()) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AppConfigurationException(<span class="string">"app '%s' already existed."</span>, appConfig.getAppName());</div><div class="line">        &#125;</div><div class="line">        appConfigService.add(appConfig);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// CloudAppConfigurationService.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* æ·»åŠ äº‘ä½œä¸šAPPé…ç½®.</div><div class="line">*</div><div class="line">* <span class="doctag">@param</span> appConfig äº‘ä½œä¸šAppé…ç½®å¯¹è±¡</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">final</span> CloudAppConfiguration appConfig)</span> </span>&#123;</div><div class="line">   regCenter.persist(CloudAppConfigurationNode.getRootNodePath(appConfig.getAppName()), CloudAppConfigurationGsonFactory.toJson(appConfig));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// CloudAppConfigurationNode.JAVA</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudAppConfigurationNode</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ROOT =  <span class="string">"/config/app"</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String APP_CONFIG =  ROOT + <span class="string">"/%s"</span>; <span class="comment">// %s = $&#123;APP_NAME&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>CloudAppRestfulApiï¼Œäº‘ä½œä¸šåº”ç”¨çš„REST APIï¼Œå®ç°äº†äº‘ä½œä¸šAppé…ç½®çš„å¤šç§æ“ä½œçš„ HTTP æ¥å£ã€‚</li><li>CloudAppConfigurationServiceï¼Œäº‘ä½œä¸šAppé…ç½®æœåŠ¡ï¼Œå®ç°äº†äº‘ä½œä¸šåº”ç”¨çš„å­˜å‚¨åŠŸèƒ½ã€‚</li><li>è°ƒç”¨ <code>AppConfigService#add(...)</code> æ–¹æ³•ï¼Œå­˜å‚¨ CloudAppConfiguration åˆ°æ³¨å†Œä¸­å¿ƒ( Zookeeper )çš„<strong>æŒä¹…</strong>æ•°æ®èŠ‚ç‚¹ <code>${NAMESPACE}/config/app/${APP_NAME}</code>ï¼ŒJSON æ ¼å¼åŒ–å¯¹è±¡ã€‚ä½¿ç”¨ zkClient æŸ¥çœ‹å¦‚ä¸‹ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><div class="line">[zk: localhost:2181(CONNECTED) 1] get /elastic-job-cloud/config/app/exampleApp</div><div class="line">&#123;"appName":"exampleApp","appURL":"http://785j8w.com1.z0.glb.clouddn.com/elastic-job-example-cloud-2.1.5.tar.gz","bootstrapScript":"bin/start.sh","cpuCount":1.0,"memoryMB":128.0,"appCacheEnable":true,"eventTraceSamplingCount":0&#125;</div></pre></td></tr></table></figure><h1 id="3-äº‘ä½œä¸š"><a href="#3-äº‘ä½œä¸š" class="headerlink" title="3. äº‘ä½œä¸š"></a>3. äº‘ä½œä¸š</h1><p>ä¸€ä¸ªäº‘ä½œä¸šåº”ç”¨å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªäº‘ä½œä¸šã€‚äº‘ä½œä¸šæœ‰<strong>ä¸¤ç§</strong>ä½œä¸šé…ç½®ï¼šäº‘ä½œä¸šé…ç½®ã€æœ¬åœ°äº‘ä½œä¸šé…ç½®ã€‚ä¸‹é¢æ¥åˆ†åˆ«åˆ†äº«å®ƒä»¬ã€‚</p><h2 id="3-1-äº‘ä½œä¸šé…ç½®"><a href="#3-1-äº‘ä½œä¸šé…ç½®" class="headerlink" title="3.1 äº‘ä½œä¸šé…ç½®"></a>3.1 äº‘ä½œä¸šé…ç½®</h2><p>CloudJobConfigurationï¼Œäº‘ä½œä¸šé…ç½®ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudJobConfiguration</span> <span class="keyword">implements</span> <span class="title">JobRootConfiguration</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ä½œä¸šåº”ç”¨åç§° &#123;<span class="doctag">@link</span> com.dangdang.ddframe.job.cloud.scheduler.config.app.CloudAppConfiguration&#125;</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String appName;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ä½œä¸šç±»å‹é…ç½®</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> JobTypeConfiguration typeConfig;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å•ç‰‡ä½œä¸šæ‰€éœ€è¦çš„CPUæ•°é‡ï¼Œæœ€å°å€¼ä¸º0.001</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> cpuCount;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å•ç‰‡ä½œä¸šæ‰€éœ€è¦çš„å†…å­˜MBï¼Œæœ€å°å€¼ä¸º1</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> memoryMB;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ä½œä¸šæ‰§è¡Œç±»å‹</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CloudJobExecutionType jobExecutionType;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Springå®¹å™¨ä¸­é…ç½®çš„beanåç§°</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> String beanName;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Springæ–¹å¼é…ç½®Springé…ç½®æ–‡ä»¶ç›¸å¯¹è·¯å¾„ä»¥åŠåç§°ï¼Œå¦‚ï¼šMETA-INF\applicationContext.xml</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> String applicationContext; </div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>JobTypeConfigurationï¼Œä½œä¸šç±»å‹é…ç½®ï¼Œåœ¨ <code>elastic-job-common-core</code> é¡¹ç›®é‡Œï¼Œä¸º Elastic-Job-Liteã€Elastic-Job-Cloud <strong>å…¬ç”¨</strong>ä½œä¸šé…ç½®ç±»ã€‚åœ¨<a href="http://www.yunai.me/Elastic-Job/job-config/?self">ã€ŠElastic-Job-Lite æºç åˆ†æ â€”â€” ä½œä¸šé…ç½®ã€‹çš„ã€Œ2.2.1 ä½œä¸šç±»å‹é…ç½®ã€</a>æœ‰è¯¦ç»†è§£æã€‚</li><li><code>cpuCount</code>, <code>memoryMB</code> é…ç½®<strong>å•ç‰‡ä½œä¸šå ç”¨çš„èµ„æºæƒ…å†µ</strong>ã€‚è¿™é‡Œä¸€å®šè¦æ³¨æ„æ˜¯å•ç‰‡ä½œä¸šï¼Œä¾‹å¦‚ä¸€ä¸ªä½œä¸šæœ‰ä¸‰ä¸ªåˆ†ç‰‡( <code>shardingTotalCount = 3</code> )ï¼Œåˆ™å ç”¨èµ„æºä¸º 3 <em><code>cpuCount</code> + 3 </em><code>memoryMB</code>ã€‚</li><li>ä½œä¸šæ‰§è¡Œç±»å‹( CloudJobExecutionType )æœ‰ä¸¤ç§ï¼šå¸¸é©»ä½œä¸š( DAEMON )ï¼Œç¬æ—¶ä½œä¸š( TRANSIENT )ã€‚åœ¨<a href="http://www.yunai.me/Elastic-Job/cloud-job-scheduler-and-executor/?self">ã€ŠElastic-Job-Cloud æºç è§£æ â€”â€” ä½œä¸šè°ƒåº¦ï¼ˆä¸€ï¼‰ã€‹</a>è¯¦ç»†è§£æã€‚Elastic-Job-Cloud ç‹¬æœ‰ï¼Œéå¸¸æœ‰è¶£ã€‚ğŸ‘ğŸ‘ğŸ‘</li><li><code>beanName</code>, <code>applicationContext</code> å®ç° Spring å¯åŠ¨æ–¹å¼ä½œä¸šã€‚åœ¨<a href="http://www.yunai.me/Elastic-Job/cloud-job-scheduler-and-executor/?self">ã€ŠElastic-Job-Cloud æºç è§£æ â€”â€” ä½œä¸šè°ƒåº¦ï¼ˆä¸€ï¼‰ã€‹</a>æœ‰è¯¦ç»†è§£æã€‚</li></ul><h3 id="3-1-1-æ“ä½œäº‘ä½œä¸šé…ç½®"><a href="#3-1-1-æ“ä½œäº‘ä½œä¸šé…ç½®" class="headerlink" title="3.1.1 æ“ä½œäº‘ä½œä¸šé…ç½®"></a>3.1.1 æ“ä½œäº‘ä½œä¸šé…ç½®</h3><p>äº‘ä½œä¸šé…ç½®æœ‰å¤šç§æ“ä½œï¼š</p><ol><li>æ·»åŠ  / æ›´æ–° / åˆ é™¤</li><li>å¼€å¯ / ç¦ç”¨</li></ol><p>æœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œæ“ä½œï¼Œä»¥<strong>æ·»åŠ </strong>ä¸¾ä¾‹å­ï¼š</p><ul><li><p>è°ƒç”¨ HTTP æ¥å£ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><div class="line">// Javaå¯åŠ¨æ–¹å¼ä½œä¸šæ³¨å†Œ</div><div class="line">curl -l -H "Content-type: application/json" -X POST -d '&#123;"jobName":"foo_job","appName":"foo_app","jobClass":"yourJobClass","jobType":"SIMPLE","jobExecutionType":"TRANSIENT","cron":"0/5 * * * * ?","shardingTotalCount":5,"cpuCount":0.1,"memoryMB":64.0,"appURL":"http://app_host:8080/foo-job.tar.gz","failover":true,"misfire":true,"bootstrapScript":"bin/start.sh"&#125;' http://elastic_job_cloud_host:8899/api/job/register</div><div class="line"></div><div class="line">// Springå¯åŠ¨æ–¹å¼ä½œä¸šæ³¨å†Œ</div><div class="line">curl -l -H "Content-type: application/json" -X POST -d '&#123;"jobName":"foo_job","jobClass":"yourJobClass","beanName":"yourBeanName","applicationContext":"applicationContext.xml","jobType":"SIMPLE","jobExecutionType":"TRANSIENT","cron":"0/5 * * * * ?","shardingTotalCount":5,"cpuCount":0.1,"memoryMB":64.0,"appURL":"http://file_host:8080/foo-job.tar.gz","failover":false,"misfire":true,"bootstrapScript":"bin/start.sh"&#125;' http://elastic_job_cloud_masterhost:8899/api/job/register</div></pre></td></tr></table></figure></li><li><p>è¿ç»´å¹³å°</p><p><img src="http://www.yunai.me/images/Elastic-Job/2017_12_14/03.png" alt=""></p></li></ul><p>è¿ç»´å¹³å°æ˜¯å¯¹è°ƒç”¨ HTTP æ¥å£çš„UIå°è£…ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// CloudJobRestfulApi.java</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudJobRestfulApi</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * æ³¨å†Œä½œä¸š.</div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> jobConfig ä½œä¸šé…ç½®</div><div class="line">     */</div><div class="line">    <span class="meta">@POST</span></div><div class="line">    <span class="meta">@Path</span>(<span class="string">"/register"</span>)</div><div class="line">    <span class="meta">@Consumes</span>(MediaType.APPLICATION_JSON)</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(<span class="keyword">final</span> CloudJobConfiguration jobConfig)</span> </span>&#123;</div><div class="line">        producerManager.register(jobConfig);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ProducerManager.java</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerManager</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * æ³¨å†Œä½œä¸š.</div><div class="line">     * </div><div class="line">     * <span class="doctag">@param</span> jobConfig ä½œä¸šé…ç½®</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(<span class="keyword">final</span> CloudJobConfiguration jobConfig)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (disableJobService.isDisabled(jobConfig.getJobName())) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> JobConfigurationException(<span class="string">"Job '%s' has been disable."</span>, jobConfig.getJobName());</div><div class="line">        &#125;</div><div class="line">        Optional&lt;CloudAppConfiguration&gt; appConfigFromZk = appConfigService.load(jobConfig.getAppName());</div><div class="line">        <span class="keyword">if</span> (!appConfigFromZk.isPresent()) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AppConfigurationException(<span class="string">"Register app '%s' firstly."</span>, jobConfig.getAppName());</div><div class="line">        &#125;</div><div class="line">        Optional&lt;CloudJobConfiguration&gt; jobConfigFromZk = configService.load(jobConfig.getJobName());</div><div class="line">        <span class="keyword">if</span> (jobConfigFromZk.isPresent()) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> JobConfigurationException(<span class="string">"Job '%s' already existed."</span>, jobConfig.getJobName());</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// æ·»åŠ äº‘ä½œä¸šé…ç½®</span></div><div class="line">        configService.add(jobConfig);</div><div class="line">        <span class="comment">// è°ƒåº¦ä½œä¸š</span></div><div class="line">        schedule(jobConfig);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// CloudJobConfigurationService.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* æ·»åŠ äº‘ä½œä¸šé…ç½®.</div><div class="line">* </div><div class="line">* <span class="doctag">@param</span> jobConfig äº‘ä½œä¸šé…ç½®å¯¹è±¡</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">final</span> CloudJobConfiguration jobConfig)</span> </span>&#123;</div><div class="line">   regCenter.persist(CloudJobConfigurationNode.getRootNodePath(jobConfig.getJobName()), CloudJobConfigurationGsonFactory.toJson(jobConfig));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// CloudJobConfigurationNode.java</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CloudJobConfigurationNode</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ROOT =  <span class="string">"/config/job"</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String JOB_CONFIG =  ROOT + <span class="string">"/%s"</span>;  <span class="comment">// %s = $&#123;JOB_NAME&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>CloudJobRestfulApiï¼Œä½œä¸šäº‘Jobçš„REST APIï¼Œå®ç°äº†ä½œä¸šäº‘Jobé…ç½®çš„å¤šç§æ“ä½œã€æŸ¥è¯¢è¿è¡Œä¸­ / å¾…è¿è¡Œ / å¤±æ•ˆè½¬ç§»ä½œä¸šåˆ—è¡¨ç­‰ HTTP æ¥å£ã€‚</li><li>ProducerManagerï¼Œå‘å¸ƒä»»åŠ¡ä½œä¸šè°ƒåº¦ç®¡ç†å™¨ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„ç±»ï¼Œåœ¨<a href="http://www.yunai.me/Elastic-Job/cloud-job-scheduler-and-executor/?self">ã€ŠElastic-Job-Cloud æºç è§£æ â€”â€” ä½œä¸šè°ƒåº¦ï¼ˆä¸€ï¼‰ã€‹</a>è¯¦ç»†è§£æã€‚</li><li>CloudJobConfigurationServiceï¼Œä½œä¸šé…ç½®æœåŠ¡ï¼Œå®ç°äº†ä½œä¸šé…ç½®çš„å­˜å‚¨åŠŸèƒ½ã€‚</li><li><p>è°ƒç”¨ <code>CloudJobConfigurationService#add(...)</code> æ–¹æ³•ï¼Œå­˜å‚¨ CloudJobConfiguration åˆ°æ³¨å†Œä¸­å¿ƒ( Zookeeper )çš„<strong>æŒä¹…</strong>æ•°æ®èŠ‚ç‚¹ <code>${NAMESPACE}/config/job/${JOB_NAME}</code>ï¼ŒJSON æ ¼å¼åŒ–å¯¹è±¡ã€‚ä½¿ç”¨ zkClient æŸ¥çœ‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><div class="line">    [zk: localhost:2181(CONNECTED) 3] get /elastic-job-cloud/config/job/test_job_simple</div><div class="line">&#123;"jobName":"test_job_simple","jobClass":"com.dangdang.ddframe.job.example.job.simple.JavaSimpleJob","jobType":"SIMPLE","cron":"0/10 * * * * ?","shardingTotalCount":1,"shardingItemParameters":"","jobParameter":"","failover":false,"misfire":false,"description":"","jobProperties":&#123;"job_exception_handler":"com.dangdang.ddframe.job.executor.handler.impl.DefaultJobExceptionHandler","executor_service_handler":"com.dangdang.ddframe.job.executor.handler.impl.DefaultExecutorServiceHandler"&#125;,"appName":"exampleApp","cpuCount":0.1,"memoryMB":64.0,"jobExecutionType":"TRANSIENT"&#125;</div></pre></td></tr></table></figure></li><li><p>è°ƒç”¨ <code>#schedule(...)</code> æ–¹æ³•ï¼Œè°ƒåº¦ä½œä¸šã€‚è¿™æ˜¯ä¸ªå¾ˆæœ‰è¶£çš„æ–¹æ³•ï¼Œåœ¨<a href="http://www.yunai.me/Elastic-Job/cloud-job-scheduler-and-executor/?self">ã€ŠElastic-Job-Cloud æºç è§£æ â€”â€” ä½œä¸šè°ƒåº¦ï¼ˆä¸€ï¼‰ã€‹</a>è¯¦ç»†è§£æã€‚</p></li></ul><h2 id="3-2-æœ¬åœ°äº‘ä½œä¸šé…ç½®"><a href="#3-2-æœ¬åœ°äº‘ä½œä¸šé…ç½®" class="headerlink" title="3.2 æœ¬åœ°äº‘ä½œä¸šé…ç½®"></a>3.2 æœ¬åœ°äº‘ä½œä¸šé…ç½®</h2><p>LocalCloudJobConfigurationï¼Œæœ¬åœ°äº‘ä½œä¸šé…ç½®ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">public final class LocalCloudJobConfiguration implements JobRootConfiguration &#123;</div><div class="line">    </div><div class="line">    private final JobTypeConfiguration typeConfig;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * åˆ†ç‰‡ä½œä¸šåºå·</div><div class="line">     */</div><div class="line">    private final int shardingItem;</div><div class="line">    </div><div class="line">    private String beanName;</div><div class="line">    </div><div class="line">    private String applicationContext;</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li><code>shardingItem</code>ï¼Œåˆ†ç‰‡ä½œä¸šåºå·ï¼Œç”¨äºæœ¬åœ°è°ƒè¯•æŒ‡å®šåˆ†ç‰‡ä½œä¸šé¡¹ã€‚</li></ul><p>åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p><blockquote><p>åœ¨å¼€å‘Elastic-Job-Cloudä½œä¸šæ—¶ï¼Œå¼€å‘äººå‘˜å¯ä»¥è„±ç¦»Mesosç¯å¢ƒï¼Œåœ¨æœ¬åœ°è¿è¡Œå’Œè°ƒè¯•ä½œä¸šã€‚å¯ä»¥åˆ©ç”¨æœ¬åœ°è¿è¡Œæ¨¡å¼å……åˆ†çš„è°ƒè¯•ä¸šåŠ¡åŠŸèƒ½ä»¥åŠå•å…ƒæµ‹è¯•ï¼Œå®Œæˆä¹‹åå†éƒ¨ç½²è‡³Mesosé›†ç¾¤ã€‚<br>æœ¬åœ°è¿è¡Œä½œä¸šæ— éœ€å®‰è£…Mesosç¯å¢ƒã€‚</p></blockquote><p>åœ¨<a href="http://elasticjob.io/docs/elastic-job-cloud/02-guide/local-executor/" rel="external nofollow noopener noreferrer" target="_blank">ã€Šå®˜æ–¹æ–‡æ¡£ â€”â€” æœ¬åœ°è¿è¡Œæ¨¡å¼ã€‹</a>æœ‰è¯¦ç»†è§£æã€‚</p><h2 id="3-3-äº‘ä½œä¸šé…ç½®æ€»ç»“"><a href="#3-3-äº‘ä½œä¸šé…ç½®æ€»ç»“" class="headerlink" title="3.3 äº‘ä½œä¸šé…ç½®æ€»ç»“"></a>3.3 äº‘ä½œä¸šé…ç½®æ€»ç»“</h2><ul><li>CloudJobConfigurationï¼šç”Ÿäº§è¿è¡Œä½¿ç”¨ã€‚</li><li>LocalCloudJobConfigurationï¼šæœ¬åœ°å¼€å‘è°ƒè¯•ã€‚</li></ul><h1 id="666-å½©è›‹"><a href="#666-å½©è›‹" class="headerlink" title="666. å½©è›‹"></a>666. å½©è›‹</h1><p>èŠ‹é“å›ï¼šæœ¬æ–‡ä¸»è¦ä¸º<a href="http://www.yunai.me/Elastic-Job/cloud-job-scheduler-and-executor/?self">ã€ŠElastic-Job-Cloud æºç è§£æ â€”â€” ä½œä¸šè°ƒåº¦ï¼ˆä¸€ï¼‰ã€‹</a>åšé“ºå«ï¼Œè¿™ä¼šæ˜¯ä¸€ç¯‡é•¿æ–‡ã€‚è¯»æ‡‚ Elastic-Job-Cloud ä½œä¸šè°ƒåº¦åï¼Œæ•´ä¸ªäººè„‘æ´åˆå¼€çš„ä¸è¡Œä¸è¡Œçš„ï¼<br>æ—ç™½å›ï¼šæ”¯æŒ+1024ã€‚</p><p><img src="http://www.yunai.me/images/Elastic-Job/2017_12_14/04.png" alt=""></p><p>å¦å¤–ï¼Œæ¨èèµ„æ–™å¦‚ä¸‹ï¼Œå¯¹ç†è§£ Elastic-Job-Cloud å¾ˆæœ‰å¸®åŠ©ã€‚</p><ul><li><a href="http://www.infoq.com/cn/news/2016/09/Mesos-Elastic-Job-Cloud" rel="external nofollow noopener noreferrer" target="_blank">ã€ŠåŸºäºMesosçš„å½“å½“ä½œä¸šäº‘Elastic Job Cloudã€‹</a></li><li><a href="http://www.infoq.com/cn/presentations/how-to-build-elastic-job-cloud" rel="external nofollow noopener noreferrer" target="_blank">ã€Šå¦‚ä½•ä»0åˆ°1æ­å»ºå¼¹æ€§ä½œä¸šäº‘Elastic-Job-Cloudã€‹</a></li></ul><p>é“å‹ï¼Œèµ¶ç´§ä¸Šè½¦ï¼Œåˆ†äº«ä¸€æ³¢æœ‹å‹åœˆï¼</p></div><footer class="article-footer clearfix"><div class="article-categories"><span></span> <a class="article-category-link" href="/categories/Elastic-Job-Cloud/">Elastic-Job-Cloud</a></div><div class="article-share" id="share"><div data-url="http://www.yunai.me/Elastic-Job/cloud-job-config/" data-title="Elastic-Job-Cloud æºç åˆ†æ â€”â€” ä½œä¸šé…ç½® | èŠ‹é“æºç  â€”â€” çº¯æºç è§£æBLOG" data-tsina="null" class="share clearfix"></div></div></footer></article><nav class="article-nav clearfix"><div class="prev"><a href="/Elastic-Job/cloud-job-scheduler-and-executor-first/" title="Elastic-Job-Cloud æºç åˆ†æ â€”â€” ä½œä¸šè°ƒåº¦ï¼ˆä¸€ï¼‰"><strong>PREVIOUS:</strong><br><span>Elastic-Job-Cloud æºç åˆ†æ â€”â€” ä½œä¸šè°ƒåº¦ï¼ˆä¸€ï¼‰</span></a></div><div class="next"><a href="/Elastic-Job/job-console/" title="Elastic-Job-Lite æºç åˆ†æ â€”â€” è¿ç»´å¹³å°"><strong>NEXT:</strong><br><span>Elastic-Job-Lite æºç åˆ†æ â€”â€” è¿ç»´å¹³å°</span></a></div></nav></div></div><footer><div id="footer"><img src="http://www.yunai.me/images/common/wechat_mp_simple.png" style="display:none"><p class="copyright">Â© 2017 <a href="http://www.yunai.me" target="_blank" title="ç‹æ–‡æ–Œ">ç‹æ–‡æ–Œ</a> && <span style="display:inline" id="busuanzi_container_site_uv">æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv" font="å¾®è½¯é›…é»‘"></span> æ¬¡</span> && <span style="display:inline" id="busuanzi_container_site_pv">æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv" font="å¾®è½¯é›…é»‘"></span> æ¬¡</span> && Hosted by <a href="https://pages.coding.me" style="font-weight:700" rel="external nofollow noopener noreferrer" target="_blank">Coding Pages</a> && Powered by <a href="http://hexo.io" target="_blank" title="hexo" rel="external nofollow noopener noreferrer">hexo</a> && Theme by <a href="http://gengbiao.me" target="_blank" title="coney" rel="external nofollow noopener noreferrer">coney</a></p></div></footer><script src="/js/jquery-2.1.0.min.js"></script><script type="text/javascript">$(document).ready(function(){function e(){"number"==typeof window.innerWidth?n=window.innerWidth:document.documentElement&&document.documentElement.clientWidth&&(n=document.documentElement.clientWidth)}$(".navbar").click(function(){$("header nav").toggleClass("shownav")});var n=0,s=$("#main"),a=$("#asidepart"),o=$(".closeaside"),d=$(".openaside");$(window).resize(function(){e(),n>=1024?$("header nav").removeClass("shownav"):(s.removeClass("moveMain"),a.css("display","block").removeClass("fadeOut"),d.css("display","none"),$("#toc.toc-aside").css("display","none"))}),o.click(function(){a.addClass("fadeOut").css("display","none"),d.css("display","block").addClass("fadeIn"),s.addClass("moveMain")}),d.click(function(){d.css("display","none").removeClass("beforeFadeIn"),a.css("display","block").removeClass("fadeOut").addClass("fadeIn"),s.removeClass("moveMain")}),$(window).scroll(function(){d.css("top",Math.max(80,260-$(this).scrollTop()))})})</script><script type="text/javascript">$(document).ready(function(){var a=$(".article-content>iframe"),t=$(".article-content>embed"),n=$("#toc");$("article h2");ah=$("article h2"),ta=$("#toc.toc-aside"),o=$(".openaside"),c=$(".closeaside"),a.length>0&&a.wrap('<div class="video-container" />'),t.length>0&&t.wrap('<div class="video-container" />'),0==ah.length?n.css("display","none"):(c.click(function(){ta.css("display","block").addClass("fadeIn")}),o.click(function(){ta.css("display","none")}),$(window).scroll(function(){ta.css("top",Math.max(140,320-$(this).scrollTop()))}))})</script><script type="text/javascript">$(document).ready(function(){var t=$(".share"),a=t.attr("data-url"),e=encodeURIComponent(a),r=['<a href="#" class="overlay" id="qrcode"></a>','<div class="qrcode clearfix"><span>æ‰«æäºŒç»´ç åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url='+e+'"/></div>','<a href="#textlogo" class="article-back-to-top" title="Top"></a>','<a href="https://www.facebook.com/sharer.php?u='+e+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>','<a href="https://twitter.com/intent/tweet?url='+e+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="http://service.weibo.com/share/share.php?title='+t.attr("data-title")+"&url="+e+"&ralateUid="+t.attr("data-tsina")+'&searchPic=true&style=number" class="article-share-weibo" target="_blank" title="Weibo"></a>','<span title="Share to"></span>'].join("");t.append(r),$(".article-share-qrcode").click(function(){var t=$("#qrcode-pic").attr("data-src");$("#qrcode-pic").attr("src",t),$("#qrcode-pic").load(function(){$(".qrcode strong").text(" ")})})})</script><link rel="stylesheet" href="/alert/css/alert.css"><script src="/alert/js/alert.js"></script><script src="/js/jquery.cookie.js"></script><script src="/js/util.js"></script></body>